<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Write DUA approved data set — write_dua_df • duawranglr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Write DUA approved data set — write_dua_df" />
<meta property="og:description" content="This function is a wrapper for a variety of write functions that
also checks whether the data set has been cleared for writing based
on the DUA level restrictions chosen by the user. If restricted
variables remain in the data set, the function will return an error
and will not write the data set." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">duawranglr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.6.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/duawranglr.html">Motivation</a>
</li>
<li>
  <a href="../articles/securing_data.html">Example usage</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">
    <span class="fas fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fas fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="https://github.com/btskinner/duawranglr">
    <span class="fas fa-github fa-lg"></span>
     
    github
  </a>
</li>
<li>
  <a href="https://twitter.com/btskinner">
    <span class="fab fa-twitter"></span>
     
    twitter
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Write DUA approved data set</h1>
    <small class="dont-index">Source: <a href='https://github.com/btskinner/duawranglr/blob/master/R/write.R'><code>R/write.R</code></a></small>
    <div class="hidden name"><code>write_dua_df.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function is a wrapper for a variety of write functions that
also checks whether the data set has been cleared for writing based
on the DUA level restrictions chosen by the user. If restricted
variables remain in the data set, the function will return an error
and will not write the data set.</p>
    </div>

    <pre class="usage"><span class='fu'>write_dua_df</span><span class='op'>(</span>
  <span class='va'>df</span>,
  <span class='va'>file_name</span>,
  output_type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"rds"</span>, <span class='st'>"rdata"</span>, <span class='st'>"csv"</span>, <span class='st'>"tsv"</span>, <span class='st'>"delimited"</span>, <span class='st'>"stata"</span>, <span class='st'>"sas"</span>, <span class='st'>"spss"</span><span class='op'>)</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df</th>
      <td><p>Data frame object to save.</p></td>
    </tr>
    <tr>
      <th>file_name</th>
      <td><p>Name and path for saved file, with or without file
type ending.</p></td>
    </tr>
    <tr>
      <th>output_type</th>
      <td><p>Output data file type; options include
<code>rds</code> (DEFAULT), <code>rdata</code>, <code>csv</code>, <code>tsv</code>,
<code>delimited</code>, <code>stata</code>, <code>sas</code>, and <code>spss</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments to pass to write function based on the
selected <code>output_type</code>; see details for more information.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The following output types are supported (with the underlying write
function and default arguments accompanying):</p>
<ul>
<li><p><b>rds</b>: <code><a href='https://rdrr.io/r/base/readRDS.html'>saveRDS()</a></code></p></li>
<li><p><b>rdata</b>: <code><a href='https://rdrr.io/r/base/save.html'>save()</a></code></p></li>
<li><p><b>csv</b>: <code><a href='https://rdrr.io/r/utils/write.table.html'>write.table(...,row.names = FALSE, sep = ,)</a></code></p></li>
<li><p><b>tsv</b>: <code><a href='https://rdrr.io/r/utils/write.table.html'>write.table(...,row.names = FALSE, sep = '\t')</a></code></p></li>
<li><p><b>delimited</b>: <code><a href='https://rdrr.io/r/utils/write.table.html'>write.table(...,row.names = FALSE)</a></code></p></li>
<li><p><b>stata</b>: <code><a href='https://haven.tidyverse.org/reference/read_dta.html'>haven::write_dta()</a></code></p></li>
<li><p><b>sas</b>: <code><a href='https://haven.tidyverse.org/reference/read_sas.html'>haven::write_sas()</a></code></p></li>
<li><p><b>spss</b>: <code><a href='https://haven.tidyverse.org/reference/read_spss.html'>haven::write_sav()</a></code></p></li>
</ul>

<p>All arguments for these internal write functions, including those
with default values, can be modified by adding them to the
top-level <code>write_dua_df()</code> function.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## --------------</span>
<span class='co'>## Setup</span>
<span class='co'>## --------------</span>
<span class='co'>## set DUA crosswalk</span>
<span class='va'>dua_cw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>'extdata'</span>, <span class='st'>'dua_cw.csv'</span>, package <span class='op'>=</span> <span class='st'>'duawranglr'</span><span class='op'>)</span>
<span class='fu'><a href='set_dua_cw.html'>set_dua_cw</a></span><span class='op'>(</span><span class='va'>dua_cw</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>-- duawranglr note -------------------------------------------------------------</span>
#&gt; <span class='message'>DUA crosswalk has been set!</span></div><div class='input'><span class='co'>## read in data</span>
<span class='va'>admin</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>'extdata'</span>, <span class='st'>'admin_data.csv'</span>, package <span class='op'>=</span> <span class='st'>'duawranglr'</span><span class='op'>)</span>
<span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='read_dua_file.html'>read_dua_file</a></span><span class='op'>(</span><span class='va'>admin</span><span class='op'>)</span>
<span class='co'>## set restriction level</span>
<span class='fu'><a href='set_dua_level.html'>set_dua_level</a></span><span class='op'>(</span><span class='st'>'level_iii'</span><span class='op'>)</span>
<span class='co'>## remove restrictive variables</span>
<span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>df</span>, <span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>sid</span>,<span class='va'>sname</span>,<span class='va'>tname</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'>## --------------</span>

<span class='co'>## check restrictions</span>
<span class='fu'><a href='check_dua_restrictions.html'>check_dua_restrictions</a></span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>-- duawranglr note -------------------------------------------------------------</span>
#&gt; <span class='message'>Data set has passed check and may be saved.</span></div><div class='input'>
<span class='co'>## able to write since restrictions check passed</span>
<span class='va'>file</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>'clean_data.csv'</span><span class='op'>)</span>
<span class='fu'>write_dua_df</span><span class='op'>(</span><span class='va'>df</span>, file_name <span class='op'>=</span> <span class='va'>file</span>, output_type <span class='op'>=</span> <span class='st'>'csv'</span><span class='op'>)</span>

<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
 <span class='fu'>write_dua_df</span><span class='op'>(</span><span class='va'>df</span>, <span class='st'>'clean_data'</span>, output_type <span class='op'>=</span> <span class='st'>'delimited'</span>, sep <span class='op'>=</span> <span class='st'>'|'</span><span class='op'>)</span>
 <span class='fu'>write_dua_df</span><span class='op'>(</span><span class='va'>df</span>, <span class='st'>'clean_data'</span>, output_type <span class='op'>=</span> <span class='st'>'stata'</span>, version <span class='op'>=</span> <span class='fl'>11</span><span class='op'>)</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://www.btskinner.io'>Benjamin Skinner</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


